{"version":3,"sources":["Image/chat.png","redux/reducers/loginReducer.ts","redux/actionTypes.ts","redux/reducers/signupReducer.ts","redux/reducers/chatRoomReducer.ts","redux/reducers/rootReducer.ts","config.ts","Services/ApiService.ts","Services/StorageService.ts","Services/WebSocketService.ts","redux/sagas/loginSaga.ts","redux/sagas/chatRoomSaga.ts","redux/sagas/signupSaga.ts","redux/sagas/saga.ts","redux/configureStore.ts","view/LoginSignup/Login.tsx","view/ChatRoom/Components/MessageBoxUserInfo.tsx","view/ChatRoom/Components/MessageBoxText.tsx","view/ChatRoom/Components/MessageBox.tsx","view/ChatRoom/Components/MessagePanel.tsx","Services/CommonService.ts","view/ChatRoom/Components/MessageSender.tsx","view/ChatRoom/ChatRoom.tsx","view/Drawer/Components/StyleList.tsx","view/Drawer/Components/ＭessageAlarm.tsx","view/Drawer/Components/UserList.tsx","view/Drawer/DrawerBar.tsx","view/TopBar.tsx","view/Components/Modal.tsx","view/Home.tsx","view/LoginSignup/Components/SignupDialog.tsx","view/LoginSignup/Signup.tsx","view/LoginSignup/Edit.tsx","App.tsx","serviceWorker.js","index.tsx","Image/message.png"],"names":["module","exports","initState","account","password","message","status","loginReducer","state","action","type","payload","userName","confirmPassword","messageBox","webSocket","onlineCount","connectStatus","styleMessageBox","isMobile","drawerOpen","userList","chatPeople","newMessageCount","imageModalOpen","imageEncodeString","chatRoomReducer","concat","counter","Object","entries","forEach","key","value","createRootReducer","history","combineReducers","router","connectRouter","signupReducer","serverHostName","axios","defaults","baseURL","headers","post","withCredentials","xsrfCookieName","xsrfHeaderName","axiosPost","url","data","setLocalStorageWithExpiry","ttl","now","Date","item","expiry","getTime","localStorage","setItem","JSON","stringify","removeLocalStorage","removeItem","getLocalStorageWithExpiry","itemStr","getItem","parse","getUserName","createWebSocket","webSocketClient","query","disconnectWebSocket","disconnect","sendNewMessage","messageType","sourceUser","targetUser","timestamp","emit","setNewMessageAlarm","dispatch","loginRequest","logout","console","log","email","result","put","token","push","connectWebSocket","signupRequest","rootSaga","takeEvery","createBrowserHistory","sagaMiddleware","createSagaMiddleware","Login","useDispatch","useSelector","setAccountPassword","e","currentTarget","id","useEffect","className","role","icon","square","imageUrl","require","label","onTrailingIconSelect","trailingIcon","onChange","outlined","raised","onClick","MessageBoxUserInfo","userMessage","MessageBoxText","openImageMadal","src","getMessage","MessageBox","React","memo","prevProps","nextProps","MessagePanel","messagePanelRef","useRef","anchorRef","backgroundStyleCss","current","offsetHeight","scrollHeight","scrollTop","scrollTo","behavior","top","ref","filter","map","convertFile","file","Promise","resolve","reject","reader","FileReader","onload","onerror","error","readAsDataURL","compressImage","a","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","MessageSender","useState","setMessage","fileUpload","getTimeStamp","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getUTCMilliseconds","sendMessage","enterClick","document","addEventListener","removeEventListener","fileUploadHandler","files","undefined","then","fileBase64","catch","err","click","style","display","accept","ChatRoom","on","hasFocus","Notification","body","listenPublicMessage","listenPrivateMessage","listenUserList","StyleList","styleListIndex","setStyleListIndex","singleSelection","selectedIndex","handleSelect","index","graphic","primaryText","ＭessageAlarm","props","UserList","setSelectedIndex","myUserName","onlineUser","values","user","splice","changeChatPeople","useCallback","DrawerBar","modal","open","onClose","borderColor","width","TopBar","getOnlinePeople","length","align","navIcon","tabIndex","hasRipple","actionItem","aria-label","data-tooltip-id","Modal","closeModal","color","alt","Home","test","navigator","userAgent","substr","window","permission","requestPermission","SignupDialog","Signup","inputHandler","indexOf","Edit","disabled","store","preloadedState","createStore","compose","applyMiddleware","routerMiddleware","run","configureStore","App","exact","path","Boolean","location","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.abbf9563.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chat.36cb8b4b.png\";","import {\n    SET_LOGIN_ACCOUNT,\n    SET_LOGIN_PASSWORD,\n    LOGIN_REQUEST,\n    LOGIN_SUCCESS,\n    LOGIN_FAIL\n} from '../actionTypes'\nimport {loginState} from '../../Interfaces';\n\nconst initState: loginState = {\n    account: '',\n    password: '',\n    message: '',\n    status: '',\n}\n\nconst loginReducer = (state = initState, action: any): loginState => {\n    switch(action.type){\n        case SET_LOGIN_ACCOUNT: {\n            return {...state, account: action.payload};\n        }\n        case SET_LOGIN_PASSWORD: {\n            return {...state, password: action.payload};\n        }\n        case LOGIN_REQUEST: {\n            return {...state, status: 'loading'};\n        }\n        case LOGIN_SUCCESS: {\n            return {...state, status: 'logined'};\n        }\n        case LOGIN_FAIL: {\n            return {\n                ...state, \n                status: 'error',\n                message: action.payload.message,\n            };\n        }\n        default: return state;\n    }\n}\n\nexport default loginReducer;","export const SET_LOGIN_ACCOUNT = 'SET_LOGIN_ACCOUNT';\nexport const SET_LOGIN_PASSWORD = 'SET_LOGIN_PASSWORD';\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\nexport const SET_SIGNUP_ACCOUNT = 'SET_SIGNUP_ACCOUNT';\nexport const SET_SIGNUP_USERNAME = 'SET_SIGNUP_USERNAME';\nexport const SET_SIGNUP_PASSWORD = 'SET_SIGNUP_PASSWORD';\nexport const SET_SIGNUP_CONFIRM_PASSWORD = 'SET_SIGNUP_CONFIRM_PASSWORD';\nexport const SET_SIGNUP_MESSAGE = 'SET_SIGNUP_MESSAGE';\nexport const SIGNUP_REQUEST = 'SIGNUP_REQUEST';\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\nexport const SIGNUP_FAIL = 'SIGNUP_FAIL';\nexport const LOGOUT = 'LOGOUT';\n\n\nexport const CONNECT_WEB_SOCKET = 'CONNECT_WEB_SOCKET';\nexport const CONNECT_WEB_SOCKET_SUCCESS = 'CONNECT_WEB_SOCKET_SUCCESS';\nexport const CONNECT_WEB_SOCKET_FAIL = 'CONNECT_WEB_SOCKET_FAIL';\nexport const DISCONNECT_WEB_SOCKET = 'DISCONNECT_WEB_SOCKET';\nexport const SET_MESSAGE_BOX = 'SET_MESSAGE_BOX';\nexport const SET_USER_LIST = 'SET_USER_LIST';\nexport const SET_MESSAGE_BOX_STYLE = 'SET_MESSAGE_BOX_STYLE';\nexport const SET_IS_MOBILE = 'SET_IS_MOBILE';\nexport const SET_DRAWER_OPEN = 'SET_DRAWER_OPEN';\nexport const SET_CHAT_PEOPLE = 'SET_CHAT_PEOPLE';\nexport const SET_NEW_MESSAGE_ALARM = 'SET_NEW_MESSAGE_ALARM';\nexport const SET_IMAGE_MODAL = 'SET_IMAGE_MODAL'\n\n\n\n\n","import {\n    SET_SIGNUP_ACCOUNT,\n    SET_SIGNUP_PASSWORD,\n    SET_SIGNUP_CONFIRM_PASSWORD,\n    SET_SIGNUP_USERNAME,\n    SET_SIGNUP_MESSAGE,\n    SIGNUP_REQUEST,\n    SIGNUP_SUCCESS,\n    SIGNUP_FAIL,\n} from '../actionTypes'\n\nconst initState: object = {\n    account: '',\n    userName: '',\n    password: '',\n    confirmPassword: '',\n    message: '',\n    status: '',\n}\n\nconst loginReducer = (state: object = initState, action: any) => {\n    switch(action.type){\n        case SET_SIGNUP_ACCOUNT: {\n            return {...state, account: action.payload};\n        }\n        case SET_SIGNUP_PASSWORD: {\n            return {...state, password: action.payload};\n        }\n        case SET_SIGNUP_USERNAME: {\n            return {...state, userName: action.payload};\n        }\n        case SET_SIGNUP_CONFIRM_PASSWORD: {\n            return {...state, confirmPassword: action.payload};\n        }\n        case SET_SIGNUP_MESSAGE:{\n            return {...state, message: action.payload}\n        }\n        case SIGNUP_REQUEST: {\n            return {...state, status: 'processing'};\n        }\n        case SIGNUP_SUCCESS: {\n            return {...state, status: 'success'};\n        }\n        case SIGNUP_FAIL: {\n            return {\n                ...state, \n                status: 'error',\n                message: action.payload.message,\n            };\n        }\n        default: return state;\n    }\n}\n\nexport default loginReducer;","import {\n    CONNECT_WEB_SOCKET,\n    CONNECT_WEB_SOCKET_SUCCESS,\n    CONNECT_WEB_SOCKET_FAIL,\n    DISCONNECT_WEB_SOCKET,\n    SET_MESSAGE_BOX,\n    SET_MESSAGE_BOX_STYLE,\n    SET_IS_MOBILE,\n    SET_DRAWER_OPEN,\n    SET_USER_LIST,\n    SET_CHAT_PEOPLE,\n    SET_NEW_MESSAGE_ALARM,\n    SET_IMAGE_MODAL\n} from '../actionTypes'\nimport {chatRoomState} from '../../Interfaces'\n\nconst initState: chatRoomState = {\n    messageBox: [],\n    webSocket: null,\n    onlineCount: 0,\n    connectStatus: '',\n    styleMessageBox: true,\n    isMobile: false,\n    drawerOpen: false,\n    userList: {\n        userName:{\n            userName: '',\n            status: ''\n        }\n    },\n    chatPeople: '',\n    newMessageCount: {},\n    imageModalOpen: false,\n    imageEncodeString: '',\n}\n\nconst chatRoomReducer = (state = initState, action: any): chatRoomState => {\n    switch(action.type){\n        case CONNECT_WEB_SOCKET:{\n            return {\n                ...state,\n                connectStatus: 'connecting'\n            }\n        }\n        case CONNECT_WEB_SOCKET_SUCCESS:{\n            return{\n                ...state,\n                connectStatus: 'connected',\n                webSocket: action.payload\n            }\n        }\n        case CONNECT_WEB_SOCKET_FAIL:{\n            return{\n                ...state,\n                connectStatus: 'disconnect',\n                webSocket: action.payload\n            }\n        }\n        case DISCONNECT_WEB_SOCKET:{\n            return{\n                ...state,\n                webSocket: null\n            }\n        }\n        case SET_USER_LIST:{\n            return{\n                ...state,\n                userList: action.payload\n            }\n        }\n        case SET_MESSAGE_BOX:{\n            return{\n                ...state,\n                messageBox: state.messageBox.concat(action.payload)\n            }\n        }\n        case SET_MESSAGE_BOX_STYLE:{\n            return{\n                ...state,\n                styleMessageBox: action.payload\n            }\n        }\n        case SET_IS_MOBILE:{\n            return{\n                ...state,\n                isMobile: action.payload\n            }\n        }\n        \n        case SET_DRAWER_OPEN:{\n            return{\n                ...state,\n                drawerOpen: action.payload\n            }\n        }\n        case SET_CHAT_PEOPLE:{\n            return {\n                ...state,\n                chatPeople: action.payload\n            }\n        }\n        case SET_NEW_MESSAGE_ALARM:{\n            const {userName} = action.payload\n            let counter = 0;\n            if(action.payload.type === 'reset' || state.chatPeople === userName){\n                return{\n                    ...state,\n                    newMessageCount: {\n                        ...state.newMessageCount,\n                        [userName]: counter\n                    }\n                }\n            }else{\n                Object.entries(state.newMessageCount).forEach(([key, value]) => {\n                    if(key === userName && typeof value === 'number'){\n                        counter = value;\n                    }\n                });\n                return{\n                    ...state,\n                    newMessageCount: {\n                        ...state.newMessageCount,\n                        [userName]: counter + 1\n                    }\n                }\n            }\n        }\n        case SET_IMAGE_MODAL:{\n            return{\n                ...state,\n                imageModalOpen: action.payload.imageModalOpen,\n                imageEncodeString: action.payload.imageEncodeString,\n            }\n        }\n        default: return state;\n    }\n}\n\nexport default chatRoomReducer;","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\nimport loginReducer from './loginReducer';\nimport signupReducer from './signupReducer'\nimport chatRoomReducer from './chatRoomReducer';\n\n\nconst createRootReducer = (history: any) => combineReducers({\n  router: connectRouter(history),\n  loginReducer,\n  signupReducer,\n  chatRoomReducer\n});\n\nexport default createRootReducer;","const PROD_HOST_NAME: string = 'https://express-chat-room-back-end.herokuapp.com';\nconst DEV_HOST_NAME: string = 'http://localhost:3000';\nexport const serverHostName: string = PROD_HOST_NAME;\nexport const PROD_ACCESS_CONTROL_ALLOW_ORIGIN: string = 'https://express-chat-room-back-end.herokuapp.com';\nexport const DEV_ACCESS_CONTROL_ALLOW_ORIGIN: string = 'http://localhost:3001';","import {\n    serverHostName,\n    DEV_ACCESS_CONTROL_ALLOW_ORIGIN\n} from '../config'\n\nimport {\n    getCookie\n} from './StorageService';\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = serverHostName;\naxios.defaults.headers.post['Accept'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.defaults.withCredentials = true;\naxios.defaults.xsrfCookieName = 'XSRF-TOKEN'; // default\naxios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'; // default\n\n\nexport const axiosGet = (url: string): object => {\n    return axios.get(url);\n}\n\nexport const axiosPost = (url: string, data: object): object => {\n    return axios.post(url, data);\n}\n\nexport default axios;\n\n/*\nexport let fetchGet = (webApi: string): object => {\n    //console.log(hostName + \"/\" + webApi);\n    const requestHeaders: HeadersInit = new Headers();\n    requestHeaders.set('Accept', 'application/json');\n    requestHeaders.set('Content-Type', 'application/json');\n    //requestHeaders.set('Authorization', token||'');\n    return fetch(DEV_HOST_NAME + \"/\" + webApi, {\n        method: 'GET',\n        //dataType: 'jsonp',\n        headers: requestHeaders\n    }).then(\n      (response: any) => {\n          return response.json();\n      }).then((result) => {\n        return result;\n      }).catch((error) => {\n          console.log(\"fetchGet: \" + webApi, error);\n      }\n    );   \n}\n\nexport let fetchPost = (webApi: string, data: object) => {\n    //console.log(\"web api\", PROD_HOST_NAME + \"/\" + webApi);\n    const requestHeaders: any = {\n        //'Access-Control-Allow-Origin': DEV_ACCESS_CONTROL_ALLOW_ORIGIN,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        //'Authorization': token\n    };\n    //Dev: DEV_HOST_NAME, Prod: PROD_HOST_NAME\n    return fetch(DEV_HOST_NAME + \"/\" + webApi,{\n        method: 'POST',\n        headers: requestHeaders,\n        credentials: 'include',\n        body: JSON.stringify(data)\n    }).then(\n      (response) => {\n          return response.json();\n      }).then((result) => {\n        return result;\n      }).catch((error) => {\n          console.log(\"fetchPost\", error);\n      }\n    );   \n}\n*/","import Cookies from 'js-cookie';\n\nexport const setLocalStorageWithExpiry = (key: string, value: string, ttl: number = 30) => {\n\tconst now = new Date()\n\t// `item` is an object which contains the original value as well as the time when it's supposed to expire\n\tconst item = {\n\t\tvalue: value,\n\t\texpiry: now.getTime() + (ttl * 1000 * 60 * 60 * 24), //By Day\n\t}\n\tlocalStorage.setItem(key, JSON.stringify(item));\n}\n\nexport const removeLocalStorage = (key: string) => {\n\tlocalStorage.removeItem(key);\n}\n\nexport const getLocalStorageWithExpiry = (key: string) => {\n\tconst itemStr = localStorage.getItem(key)\n\t// if the item doesn't exist, return null\n\tif (!itemStr) {\n\t\treturn null\n\t}\n\tconst item = JSON.parse(itemStr)\n\tconst now = new Date();\n\t// compare the expiry time of the item with the current time\n\tif (now.getTime() > item.expiry) {\n\t\t// If the item is expired, delete the item from storage and return null\n\t\tlocalStorage.removeItem(key)\n\t\treturn null\n\t}\n\treturn item.value\n}\n\nexport const getCookie = (key: string): string|undefined => {    \n    return Cookies.get(key);;\n}\n\nexport const setCookie = (key: string, value: string): void => {\n    Cookies.set(key, value /*, { expires: 7 }*/);\n}\n\nexport const delCookie = (key: string): void => {\n    Cookies.remove(key);\n}","import webSocketClient from 'socket.io-client'\nimport {serverHostName} from '../config';\nimport {\n    getLocalStorageWithExpiry,\n    setLocalStorageWithExpiry\n} from './StorageService';\nimport {\n    SET_MESSAGE_BOX,\n    SET_USER_LIST,\n    SET_NEW_MESSAGE_ALARM\n} from '../redux/actionTypes';\nimport {\n    messageInterface, \n    userListInterface\n} from '../Interfaces'\n\n\nconst getUserName = (): string => {\n    return getLocalStorageWithExpiry('userName');\n}\n\nexport const createWebSocket = () => {\n    const userName = getUserName();\n    return webSocketClient(serverHostName, {query: `userName=${userName}`});\n}\n\nexport const disconnectWebSocket = (webSocket: any): void => {\n    const userName = getUserName();\n    webSocket.disconnect(serverHostName, {query: `userName=${userName}`});\n}\n\nexport const sendNewMessage = (webSocket: any, messageType: string, sourceUser: string, targetUser: string, message: string, \n    timestamp: string) => {\n    //console.log('socket', sourceUser, targetUser);\n    webSocket.emit('sendMessage', {\n        sourceUser: sourceUser,\n        targetUser: targetUser,\n        messageType: messageType,\n        message: message,\n        timestamp: timestamp\n    });\n}\n\nexport const listenUserList = (webSocket: any, dispatch: any) => {\n    webSocket.on('userList', (userList: userListInterface) => {\n        dispatch({\n            type: SET_USER_LIST,\n            payload: userList\n        });\n    })\n}\n\nexport const listenPublicMessage = (webSocket: any, dispatch: any, isMobile: boolean) => {   \n    webSocket.on('newPublicMessage', (userMessage: messageInterface) => {   \n        setNewMessageAlarm(dispatch, userMessage.sourceUser, userMessage.targetUser);\n        dispatch({\n            type: SET_MESSAGE_BOX,\n            payload: userMessage\n        });\n        if(!document.hasFocus() && !isMobile){  \n            new Notification(userMessage.sourceUser, {\n                body: userMessage.message,\n                icon: require('../Image/message.png'),\n            }); \n        }\n    });\n}\n\nexport const listenPrivateMessage = (webSocket: any, dispatch: any, isMobile: boolean) => {\n    webSocket.on('newPrivateMessage', (userMessage: messageInterface) => { \n        setNewMessageAlarm(dispatch, userMessage.sourceUser, userMessage.targetUser);\n        dispatch({\n            type: SET_MESSAGE_BOX,\n            payload: userMessage\n        });\n       if(!document.hasFocus() && !isMobile){  \n        new Notification(userMessage.sourceUser, {\n            body: userMessage.message,\n            icon: require('../Image/message.png'),\n            }); \n        }\n    });\n}\n\nconst setNewMessageAlarm = (dispatch: any, sourceUser: string, targetUser: string) => {\n    const userName = getUserName();\n    if(userName !== sourceUser){\n        dispatch({\n            type: SET_NEW_MESSAGE_ALARM,\n            payload: {\n                type: 'append',\n                userName: (targetUser === 'Public')? targetUser: sourceUser\n            }\n        });\n    }\n}","/* eslint-disable no-constant-condition */\nimport { put } from 'redux-saga/effects'\nimport { push } from 'connected-react-router'\nimport {\n  axiosPost\n} from '../../Services/ApiService';\nimport {\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  DISCONNECT_WEB_SOCKET\n} from '../actionTypes';\nimport {\n  setLocalStorageWithExpiry,\n  //getLocalStorageWithExpiry,\n  removeLocalStorage,\n} from '../../Services/StorageService'\n\nimport {\n  disconnectWebSocket\n} from '../../Services/WebSocketService';\n\nexport function* loginRequest(action: any) {\n  let {account, password} = action.payload;\n  console.log(account, password);\n  let result = yield axiosPost(\"login\", {email: account, password: password});\n  //console.log(result);\n  if(result.data.status === \"fail\"){\n    console.log('Fail:', result);\n    yield put({ \n      type: LOGIN_FAIL,\n      payload: {\n        message: result.data.message\n      }\n    })\n  }else if(result.data.status === \"success\"){\n    console.log('success:', result);\n    const {token, userName} = result.data;\n    yield setLocalStorageWithExpiry('token', token, 1);\n    yield setLocalStorageWithExpiry('userName', userName, 1);\n    yield put({ type: LOGIN_SUCCESS });\n    yield put(push('/'));\n  }\n}\n\nexport function *logout(action: any){\n  console.log('logout action', action);\n  const webSocket = action.payload;\n  yield removeLocalStorage('userName');\n  yield removeLocalStorage('token');\n  yield disconnectWebSocket(webSocket);\n  yield put({type: DISCONNECT_WEB_SOCKET});\n  yield put(push('/login'));\n}\n","/* eslint-disable no-constant-condition */\nimport { put } from 'redux-saga/effects';\nimport {\n    CONNECT_WEB_SOCKET_SUCCESS,\n    CONNECT_WEB_SOCKET_FAIL\n} from '../actionTypes';\nimport {\n    createWebSocket,\n} from '../../Services/WebSocketService'\n\nexport function *connectWebSocket(action: any) {\n    //console.log('connectWebSocket', action);\n    let webSocket = yield createWebSocket(); //webSocketClient(DEV_HOST_NAME, {query: `userName=${userName}`}); //webSocketClient('http://localhost:3000');\n    if(webSocket){\n        yield put({\n            type: CONNECT_WEB_SOCKET_SUCCESS,\n            payload: webSocket\n        });\n    }else{\n        yield put({\n            type: CONNECT_WEB_SOCKET_FAIL\n        })\n    }\n}\n","/* eslint-disable no-constant-condition */\nimport { put } from 'redux-saga/effects'\nimport { push } from 'connected-react-router'\nimport {\n  axiosPost\n} from '../../Services/ApiService';\nimport {\n  SIGNUP_SUCCESS,\n  SIGNUP_FAIL,\n} from '../actionTypes';\n\n\nexport function* signupRequest(action: any) {\n  const {account, password, userName} = action.payload;\n  const result = yield axiosPost(\"signup\", {email: account, password: password, userName: userName});\n  const {status, message} = result.data;\n  console.log('result', result);\n  if(status === \"error\"){\n    console.log('Fail:', result);\n    yield put({ \n      type: SIGNUP_FAIL,\n      payload: {\n        message: message\n      }\n    })\n  }else if(status === \"success\"){\n    console.log('Signup success');\n    yield put({ type: SIGNUP_SUCCESS });\n  }\n}\n","/* eslint-disable no-constant-condition */\n\nimport { put, takeEvery } from 'redux-saga/effects'\nimport {\n  LOGIN_REQUEST,\n  SIGNUP_REQUEST,\n  CONNECT_WEB_SOCKET,\n  LOGOUT\n} from '../actionTypes'\nimport {\n    loginRequest,\n    logout\n} from './loginSaga';\nimport {connectWebSocket} from './chatRoomSaga';\nimport { signupRequest } from './signupSaga';\n\nexport default function* rootSaga() {\n  yield takeEvery(LOGIN_REQUEST, loginRequest);\n  yield takeEvery(SIGNUP_REQUEST, signupRequest);\n  yield takeEvery(LOGOUT, logout);\n  yield takeEvery(CONNECT_WEB_SOCKET, connectWebSocket);\n}\n","import { createBrowserHistory } from 'history';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { routerMiddleware } from 'connected-react-router';\nimport createSagaMiddleware from 'redux-saga';\nimport createRootReducer from './reducers/rootReducer';\nimport rootSaga from './sagas/saga';\n\nexport const history = createBrowserHistory()\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport default function configureStore(preloadedState: object) {\n  const store = createStore(\n    createRootReducer(history), // root reducer with router state\n    preloadedState,\n    compose(\n      applyMiddleware(\n        routerMiddleware(history), // for dispatching history actions\n        sagaMiddleware\n      ),\n    ),\n  )\n  sagaMiddleware.run(rootSaga);\n  return store\n}","import React, {useEffect} from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport Card, {\n    CardPrimaryContent,\n    CardMedia,\n    CardActions,\n    CardActionButtons,\n} from \"@material/react-card\";\nimport Button from '@material/react-button';\nimport TextField, {Input} from '@material/react-text-field';\nimport MaterialIcon from '@material/react-material-icon';\nimport { push } from 'connected-react-router'\nimport {\n    SET_LOGIN_ACCOUNT,\n    SET_LOGIN_PASSWORD,\n    LOGIN_REQUEST\n} from '../../redux/actionTypes';\nimport {getLocalStorageWithExpiry} from '../../Services/StorageService';\nimport {stateInterface} from '../../Interfaces';\n\n\nconst Login = () => {\n    const dispatch = useDispatch();\n    const {account, password, status, message} = useSelector((state: stateInterface) => state.loginReducer);\n    const token = getLocalStorageWithExpiry('token')\n\n    let setAccountPassword = (e: any): void => {\n        const {id, value} = e.currentTarget;\n        switch(id){\n            case \"account\":\n                dispatch({\n                    type: SET_LOGIN_ACCOUNT,\n                    payload: value,\n                });\n                break;\n            case \"password\":\n                dispatch({\n                    type: SET_LOGIN_PASSWORD,\n                    payload: value,\n                });\n                break;\n        }\n    }\n    \n    let loginHandler = (): void => {\n        dispatch({\n            type: LOGIN_REQUEST,\n            payload: {\n                account: account,\n                password: password\n            }   \n        })\n    }\n    \n    ///Check if is logined\n    useEffect((): void => {\n        if(token){\n            dispatch(push('/'));\n        }\n    }, [token]);\n\n    return(\n        <div id='signLoginContainer'>\n            <Card id=\"signLoginCard\">\n                <CardPrimaryContent className=\"tittle\">\n                    <MaterialIcon role=\"button\" icon=\"person\" />\n                    <a>Login</a>\n                </CardPrimaryContent>\n                <hr className='separate_line'/>\n                <CardMedia id=\"login_logo\" square imageUrl={require('../../Image/chat.png')} />   \n                <CardActions>\n                    <CardActionButtons className='signup_login_info'>\n                        <TextField\n                            label='Email'\n                            className=\"textField\" \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={(): void => {\n                                dispatch({\n                                    type: SET_LOGIN_ACCOUNT,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"account\"\n                                type=\"email\"\n                                value={account}\n                                onChange={setAccountPassword} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Password'\n                            className=\"textField\"  \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={ (): void => {\n                                dispatch({\n                                    type: SET_LOGIN_PASSWORD,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"password\"\n                                type=\"password\"\n                                value={password}\n                                onChange={setAccountPassword} \n                            />\n                        </TextField>\n                        <div>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                icon={<MaterialIcon role=\"button\" icon=\"login\" />}\n                                onClick={loginHandler}\n                            >Login\n                            </Button>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                icon={<MaterialIcon role=\"button\" icon=\"account_box\" />}\n                                onClick={() => {\n                                    dispatch(push('signup'));\n                                }}\n                            >Signup\n                            </Button>\n                        </div>\n                    </CardActionButtons>\n                </CardActions>\n                {(status === \"error\")?(\n                    <div className='warnMsg'>\n                        <p>{message}</p>\n                    </div>\n                ): []}\n            </Card>\n        </div>\n    )\n}\n\nexport default Login;","import React from 'react';\nimport MaterialIcon from '@material/react-material-icon';\nimport {messageInterface} from '../../../Interfaces';\n\nconst MessageBoxUserInfo = (userMessage: messageInterface) => {\n    return(\n        <div className='message-box-userInfo'>\n            <MaterialIcon role=\"button\" icon=\"account_circle\" className=\"account_icon\"/>\n            <span>{userMessage.sourceUser}({userMessage.timestamp})</span>\n        </div>\n    );\n}\n\nexport default MessageBoxUserInfo;","import React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport { getLocalStorageWithExpiry } from '../../../Services/StorageService';\nimport {\n    SET_IMAGE_MODAL\n} from '../../../redux/actionTypes'\nimport {\n    messageInterface,\n    stateInterface\n} from '../../../Interfaces';\n\nconst MessageBoxText = (userMessage: messageInterface) => {\n    const {styleMessageBox} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const dispatch = useDispatch();\n    const userName = getLocalStorageWithExpiry('userName');\n\n    const openImageMadal = (): void => {\n        dispatch({\n            type: SET_IMAGE_MODAL,\n            payload:{\n                imageModalOpen: true,\n                imageEncodeString: userMessage.message\n            }\n        })\n    }\n    \n    const getMessage = () => {\n        switch(userMessage.messageType){\n            case 'string':{\n                return userMessage.message\n            }\n            case 'image':{\n                return <img src={userMessage.message} className='message-image' onClick={openImageMadal}></img>\n            }\n        }   \n    }\n    //console.log('userMessage', userMessage);\n    return(\n        <div className={(styleMessageBox)?((userName === userMessage.sourceUser)? \"style-message-text-mine\": \"style-message-text-other\"): 'message-text'}>\n            {   \n                getMessage()\n            }\n        </div>\n    );\n}\n\nexport default MessageBoxText;","import React from 'react';\nimport { getLocalStorageWithExpiry } from '../../../Services/StorageService';\nimport MessageBoxUserInfo from './MessageBoxUserInfo';\nimport MessageBoxText from './MessageBoxText';\nimport {messageInterface} from '../../../Interfaces';\n\nconst MessageBox = React.memo((userMessage: messageInterface) => {\n    const userName = getLocalStorageWithExpiry('userName');\n    return(\n        <div \n            className={(userName === userMessage.sourceUser)? \"message-box-mine\": \"message-box-other\"}>\n            <MessageBoxUserInfo {...userMessage} />\n            <MessageBoxText {...userMessage} />\n        </div>\n    );\n}, (prevProps: messageInterface, nextProps: messageInterface): boolean => {\n    return (prevProps.sourceUser === nextProps.sourceUser && prevProps.timestamp === nextProps.timestamp);\n});\n\nexport default MessageBox","import React, {useEffect, useRef} from 'react';\nimport {useSelector} from 'react-redux';\nimport MessageBox from './MessageBox';\nimport {getLocalStorageWithExpiry} from '../../../Services/StorageService';\nimport {\n    messageInterface,\n    stateInterface\n} from '../../../Interfaces'; \n\nconst MessagePanel = () => {\n    const userName = getLocalStorageWithExpiry('userName');\n    const {messageBox, styleMessageBox, chatPeople} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const messagePanelRef = useRef<HTMLDivElement>(null);\n    const anchorRef = useRef<HTMLDivElement>(null);\n    const backgroundStyleCss: {style: string, nonStyle: string} = {\n        style: 'style-messagePanel-background', \n        nonStyle: 'non-style-messagePanel-background'\n    };\n\n    useEffect(() => {\n        if(messageBox && messagePanelRef.current){\n            if(messagePanelRef.current.offsetHeight < messagePanelRef.current.scrollHeight\n                && messagePanelRef.current.scrollTop + messagePanelRef.current.offsetHeight + 200\n                > messagePanelRef.current.scrollHeight){\n                    messagePanelRef.current.scrollTo({\n                        behavior: \"smooth\", \n                        top: messagePanelRef.current?.scrollHeight - messagePanelRef.current.offsetHeight\n                    });\n                }\n        }\n    }, [messageBox]); \n    \n\n    return(\n        <div className={(styleMessageBox)? backgroundStyleCss.style: backgroundStyleCss.nonStyle}>\n            <div id=\"messagePanel\" ref={messagePanelRef}>\n                {\n                    messageBox.filter((userMessage:messageInterface) => {\n                        if(chatPeople === 'Public' && userMessage.targetUser === 'Public'){\n                            return userMessage;\n                        }else if((chatPeople === userMessage.targetUser && userName === userMessage.sourceUser) ||\n                                 (chatPeople === userMessage.sourceUser && userName === userMessage.targetUser)\n                                ){\n                                    return userMessage;\n                                }\n                    }).map((userMessage: messageInterface) => (\n                        <MessageBox {...userMessage} key={userMessage.sourceUser + userMessage.timestamp}/>\n                    ))\n                }\n                <div className='anchor' ref={anchorRef}></div>\n            </div>\n        </div>\n    );\n}\n\nexport default MessagePanel;","import imageCompression from 'browser-image-compression';\n\nexport const convertFile = (file: File): Promise<string> => {\n    return new Promise((resolve,reject) => {\n        let reader = new FileReader()\n        // Resolve the Base64 string result\n        reader.onload = () => { \n            if(typeof reader.result === 'string'){\n                resolve(reader.result);\n            }\n        }\n        // Reject if error occurs\n        reader.onerror = () => { \n            reject(reader.error) \n        }\n        // Read the file\n        reader.readAsDataURL(file);\n    })\n}\n\nexport const compressImage = async(file: File): Promise<File> => {\n    const options = {\n        maxSizeMB: 1,\n        maxWidthOrHeight: 1920,\n        useWebWorker: true\n    }\n    //console.log('originalFile instanceof Blob', file instanceof Blob); // true\n    //console.log(`originalFile size ${file.size / 1024 / 1024} MB`);\n    const compressedFile = await imageCompression(file, options);\n    //console.log('compressedFile instanceof Blob', compressedFile instanceof Blob); // true\n    //console.log(`compressedFile size ${compressedFile.size / 1024 / 1024} MB`); // smaller than maxSizeMB\n    return compressedFile;\n}","import React, {useEffect, useState, useRef} from 'react';\nimport { useSelector } from 'react-redux';\nimport TextField, {Input} from '@material/react-text-field';\nimport MaterialIcon from '@material/react-material-icon';\nimport Button from '@material/react-button';\n//import imageCompression from 'browser-image-compression';\nimport {convertFile, compressImage} from '../../../Services/CommonService';\nimport {getLocalStorageWithExpiry} from '../../../Services/StorageService';\nimport {sendNewMessage} from '../../../Services/WebSocketService';\nimport {\n    stateInterface,\n    keyInterface,\n    inputEventInterface\n} from '../../../Interfaces'; \n\n\n\nconst MessageSender = () => {\n    const [message, setMessage] = useState('');\n    const fileUpload = useRef<HTMLInputElement>(null);\n    const  {webSocket, chatPeople} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const userName = getLocalStorageWithExpiry('userName') || '';\n    \n    const messageHandler = (e: inputEventInterface): void => {\n        const {value} = e.currentTarget;\n        setMessage(value);\n    }\n\n    const getTimeStamp = (): string => {\n        const date: Date = new Date();\n        const timestamp: string = date.getFullYear() + '/' + (date.getMonth() + 1) +  '/' + date.getDate() +\n            ' ' + new Date().getHours() + ':' + new Date().getMinutes() + \n            ':' + new Date().getSeconds() + ':' + new Date().getUTCMilliseconds();\n        return timestamp;\n    }\n\n    const sendMessage = (): void => {\n        const timestamp: string = getTimeStamp();\n        sendNewMessage(webSocket, 'string', userName, chatPeople, message, timestamp);\n        setMessage(''); //Clear Textedit\n    }\n\n    const enterClick = (key: keyInterface): void => {\n        if(key.key === 'Enter'){\n            sendMessage();\n        }\n    };\n\n    useEffect(() => {\n        document.addEventListener('keypress', enterClick);\n        return () => {\n            document.removeEventListener('keypress', enterClick);\n        }\n    }, [message]);\n\n\n    const fileUploadHandler = async() => {\n        if(fileUpload.current?.files !== null && fileUpload.current?.files !== undefined){\n            const file = fileUpload.current.files[0];\n            //Compress Image at first\n            //console.log('originalFile instanceof Blob', file instanceof Blob); // true\n            //console.log(`originalFile size ${file.size / 1024 / 1024} MB`);\n            // const options = {\n            //     maxSizeMB: 1,\n            //     maxWidthOrHeight: 1920,\n            //     useWebWorker: true\n            // }\n            try {\n            const compressedFile = await compressImage(file);\n            //console.log('compressedFile instanceof Blob', compressedFile instanceof Blob); // true\n            //console.log(`compressedFile size ${compressedFile.size / 1024 / 1024} MB`); // smaller than maxSizeMB\n            /* Convert Image to base64 decode */\n            convertFile(compressedFile).then((fileBase64: string) => {\n                //console.log('image Decode', fileBase64);\n                //console.log('file Name', file.name);\n                const timestamp: string = getTimeStamp();\n                sendNewMessage(webSocket, 'image', userName, chatPeople, fileBase64, timestamp);\n            }).catch(err => console.log('error', err));\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }\n\n    return(\n        <div id='messageSender'> \n            <TextField\n                label='你想說什麼'\n                id=\"msgTextEdit\"                 \n                //helperText={<HelperText>Help Me!</HelperText>}\n                onTrailingIconSelect={() => {fileUpload.current?.click();}}\n                trailingIcon={<MaterialIcon role=\"button\" icon=\"image\"/>}\n            >\n                <Input\n                    id=\"msgTextEditInput\" \n                    value={message}\n                    onChange={messageHandler} \n                />\n            </TextField>    \n            <input type='file' style={{display: 'none'}} ref={fileUpload} accept=\"image/*\" onChange={fileUploadHandler}/> \n            <Button \n                id=\"txtSendBtn\"\n                outlined={true} \n                raised={true} \n                icon={<MaterialIcon role=\"button\" icon=\"send\" />}\n                onClick={sendMessage}\n            >Send\n            </Button>\n        </div>\n    );\n}\n\nexport default MessageSender;","import React, { useEffect } from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {\n    CONNECT_WEB_SOCKET\n} from '../../redux/actionTypes';\nimport {\n    listenUserList,\n    listenPublicMessage,\n    listenPrivateMessage\n} from '../../Services/WebSocketService'\nimport MessagePanel from './Components/MessagePanel';\nimport MessageSender from './Components/MessageSender';\nimport {stateInterface} from '../../Interfaces';\n\nconst ChatRoom = () => {  \n    const dispatch = useDispatch();\n    const {webSocket, isMobile} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    \n    ///Connect web socket\n    useEffect(() => {\n        if(webSocket){\n            listenPublicMessage(webSocket, dispatch, isMobile);\n            listenPrivateMessage(webSocket, dispatch, isMobile);\n            listenUserList(webSocket, dispatch);\n        }else{\n            dispatch({type: CONNECT_WEB_SOCKET});\n        }\n    }, [webSocket]);\n\n    return (\n        <main id='mainGrid'>\n            <MessagePanel/>\n            <MessageSender/>\n        </main>\n    );\n}\n\nexport default ChatRoom;","import React, {useState} from 'react';\nimport {useDispatch} from 'react-redux';\nimport List, {ListItem, ListItemGraphic, ListItemText} from '@material/react-list';\nimport MaterialIcon from '@material/react-material-icon';\nimport {SET_MESSAGE_BOX_STYLE} from '../../../redux/actionTypes';\n\nconst StyleList = () => {\n    const [styleListIndex, setStyleListIndex] = useState(0);\n    const dispatch = useDispatch();\n\n    const setMessageBoxStyle = (index: number): void => {\n        setStyleListIndex(index);\n        const isMessageBoxStyle = index === 0? true: false;\n        dispatch({\n            type: SET_MESSAGE_BOX_STYLE,\n            payload: isMessageBoxStyle\n        })\n    }\n\n    return(\n        <List \n            singleSelection \n            selectedIndex={styleListIndex}\n            handleSelect={setMessageBoxStyle}\n        >\n            <ListItem>\n                <ListItemGraphic graphic={<MaterialIcon icon='color_lens'/>} />\n                <ListItemText primaryText='Colorful Theme Style' />\n            </ListItem>\n            <ListItem>\n                <ListItemGraphic graphic={<MaterialIcon icon='format_color_reset'/>} />\n                <ListItemText primaryText='Simple Style' />\n            </ListItem>\n        </List>\n    );\n}\n\nexport default StyleList;","import React from 'react';\n\ninterface propInterface{\n    newMessageCount: number\n}\n\nconst ＭessageAlarm = React.memo((props: propInterface) => {\n    const {newMessageCount} = props;\n    return(\n        <div className='message-alarm'>{newMessageCount}</div>\n    )\n}, (prevProps: propInterface, nextProps: propInterface): boolean => {\n    return (prevProps.newMessageCount === nextProps.newMessageCount);\n})\nexport default ＭessageAlarm;","import React, {useState, useCallback, useEffect} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport List, {ListItem, ListItemGraphic, ListItemText} from '@material/react-list';\nimport MaterialIcon from '@material/react-material-icon';\nimport {getLocalStorageWithExpiry} from '../../../Services/StorageService';\nimport { \n    SET_CHAT_PEOPLE,\n    SET_NEW_MESSAGE_ALARM\n} from '../../../redux/actionTypes';\nimport ＭessageAlarm from './ＭessageAlarm';\nimport {stateInterface} from '../../../Interfaces'\n\nconst UserList = () => {\n    const [selectedIndex, setSelectedIndex] = useState(0);\n    const myUserName = getLocalStorageWithExpiry('userName');\n    const {userList, newMessageCount} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const dispatch = useDispatch();\n    const onlineUser = Object.values(userList).filter((user) => user.status === 'online' && user.userName !== myUserName);\n    onlineUser.splice(0, 0, {userName: 'Public', status: 'online'});\n\n    const changeChatPeople = useCallback((index: number) => {\n        setSelectedIndex(index);\n        dispatch({\n            type: SET_CHAT_PEOPLE,\n            payload: onlineUser[index].userName\n        });\n        dispatch({\n            type: SET_NEW_MESSAGE_ALARM,\n            payload: {\n                type: 'reset',\n                userName: onlineUser[index].userName\n            }\n        })\n    }, [onlineUser]);\n\n    useEffect(() => {\n        changeChatPeople(0); //Default is public\n    }, []);\n\n    return(\n        <List \n            singleSelection \n            selectedIndex={selectedIndex}\n            handleSelect={changeChatPeople}\n        >\n            {\n                onlineUser.map((user) => {\n                    return(\n                        <ListItem key={user.userName}>\n                            <ListItemGraphic graphic={\n                                <MaterialIcon \n                                    icon={(user.userName==='Public')? 'people': 'person'}\n                                />\n                                } \n                            />\n                            <ListItemText primaryText={user.userName} />\n                            {(newMessageCount[user.userName] > 0)?\n                            <ＭessageAlarm \n                                newMessageCount={(newMessageCount[user.userName])? newMessageCount[user.userName]: 0} \n                            />: []\n                            }\n                        </ListItem>\n                    )\n                })\n            }\n        </List>\n    )\n}\n\nexport default UserList;","import React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Drawer, {DrawerContent} from '@material/react-drawer';\nimport {getLocalStorageWithExpiry} from '../../Services/StorageService';\nimport {SET_DRAWER_OPEN} from '../../redux/actionTypes';\nimport StyleList from './Components/StyleList';\nimport UserList from './Components/UserList';\nimport {stateInterface} from '../../Interfaces';\n\nconst DrawerBar = () => {\n    const userName = getLocalStorageWithExpiry('userName');\n    const dispatch = useDispatch();\n    const {drawerOpen} = useSelector((state: stateInterface) => state.chatRoomReducer);\n\n    const closeDrawer = () => {\n        dispatch({\n            type: SET_DRAWER_OPEN,\n            payload: false\n        })\n    }\n\n    return(\n        <Drawer\n            modal\n            open={drawerOpen}\n            onClose={closeDrawer}\n        >\n            <DrawerContent>\n                <p id='drawer-greeting'>Welcome, {userName}</p>\n                <hr style={{borderColor: '#2E86C1', width: '90%'}}/>\n                <p className='drawer-title'>Style</p>\n                <StyleList/>\n                <hr style={{borderColor: '#2E86C1', width: '90%'}}/>\n                <p className='drawer-title'>Online People</p>\n                <UserList/>\n            </DrawerContent>\n        </Drawer>\n    )\n}\n\nexport default DrawerBar;","import React, {useCallback} from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport TopAppBar, {\n    TopAppBarIcon,\n    TopAppBarRow,\n    TopAppBarSection,\n    TopAppBarTitle,\n  } from '@material/react-top-app-bar';\nimport MaterialIcon from '@material/react-material-icon';\nimport {\n    SET_DRAWER_OPEN,\n    LOGOUT\n} from '../redux/actionTypes';\nimport {stateInterface} from '../Interfaces';\n\n\nconst TopBar = () => {\n    const dispatch = useDispatch();\n    const {drawerOpen, webSocket, chatPeople, userList} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    \n    const showDrawerHandler = () => {\n        dispatch({\n            type: SET_DRAWER_OPEN,\n            payload: !drawerOpen\n        })\n    }\n\n    /// Logout handler\n    const logoutHandler = (): void => {\n        dispatch({\n            type: LOGOUT,\n            payload: webSocket\n        })\n    };\n\n    const getOnlinePeople = useCallback(() => {\n        return Object.values(userList).filter((item) => item.status === 'online').length;\n    }, [userList]);\n\n    return(\n        <TopAppBar>\n            <TopAppBarRow>\n                <TopAppBarSection align='start'>\n                    <TopAppBarIcon navIcon tabIndex={0}>\n                        <MaterialIcon hasRipple icon='menu' onClick={showDrawerHandler}/>\n                    </TopAppBarIcon>\n                    <TopAppBarTitle tabIndex={1}>\n                        Chat Room\n                        <MaterialIcon \n                            hasRipple \n                            icon='chat' \n                        />\n                    </TopAppBarTitle>\n                </TopAppBarSection>\n                <TopAppBarSection>\n                    <div id='chat-people-block'>\n                        <p id='chat-people'> Chat: {chatPeople} </p>\n                        <p id='online-people'> ( Online People: {getOnlinePeople()} )</p>\n                    </div>\n                </TopAppBarSection>\n                <TopAppBarSection align='end' role='toolbar'>\n                    <TopAppBarIcon actionItem tabIndex={0}>\n                        <MaterialIcon \n                            aria-label=\"Edit\" \n                            hasRipple \n                            icon='person'\n                            data-tooltip-id=\"tooltip-id\"\n                            onClick={() => {dispatch(push('/edit'))}}\n                        />\n                       \n                    </TopAppBarIcon>\n                    <TopAppBarIcon actionItem tabIndex={1}>\n                        <MaterialIcon \n                            aria-label=\"Logout\" \n                            hasRipple \n                            icon='exit_to_app' \n                            onClick={logoutHandler}\n                        />\n                    </TopAppBarIcon>\n                </TopAppBarSection>\n            </TopAppBarRow>\n        </TopAppBar>\n    );\n};\n\nexport default TopBar;","import React, {useCallback} from 'react';\nimport {useSelector, useDispatch} from 'react-redux'\nimport {stateInterface} from '../../Interfaces';\nimport {SET_IMAGE_MODAL} from '../../redux/actionTypes';\n\nconst Modal = () => {\n    const {imageModalOpen, imageEncodeString} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const dispatch = useDispatch();\n    const closeModal = useCallback((): void => {\n        dispatch({\n            type: SET_IMAGE_MODAL,\n            payload:{\n                imageModalOpen: false,\n                imageEncodeString: ''\n            }\n        })\n    }, []);\n    return(\n        <div id=\"myModal\" className=\"modal\" style={{display: (imageModalOpen)? 'block': 'none'} }>\n            <span className=\"close\" style={{color: 'white'}} onClick={closeModal}>&times;</span>\n            <img className=\"modal-content\" alt='messageImage' src={imageEncodeString} />\n        </div>\n    );\n}\n\nexport default Modal;","import React, {useEffect} from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport {TopAppBarFixedAdjust} from '@material/react-top-app-bar';\nimport {\n    getLocalStorageWithExpiry, \n} from '../Services/StorageService';\nimport {\n    SET_IS_MOBILE\n} from '../redux/actionTypes';\nimport ChatRoom from './ChatRoom/ChatRoom';\nimport DrawerBar from './Drawer/DrawerBar';\nimport TopBar from './TopBar';\nimport Modal from './Components/Modal'\nimport {stateInterface} from '../Interfaces';\n\nconst Home = () => {\n    const dispatch = useDispatch();\n    const {isMobile} = useSelector((state: stateInterface) => state.chatRoomReducer);\n    const token = getLocalStorageWithExpiry('token');\n\n    /// Check if is mobile device\n    useEffect(() => {\n        if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) \n            || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { \n            dispatch({\n                type: SET_IS_MOBILE,\n                payload: true\n            });\n        } \n        if(!isMobile){\n            if(window.Notification && Notification.permission !== 'granted'){\n                Notification.requestPermission((status) => {\n                    console.log('status', status);\n                });\n            }\n        }\n    }, []);\n    \n    /// Check if is logined\n    useEffect(() => {\n        if(!token){\n            dispatch(push('/login'));\n        }\n    }, [token]);\n\n\n    return (\n    <>\n    {\n        (token)?\n        <>\n            <div className='drawer-container'>\n                <TopBar/>\n                <TopAppBarFixedAdjust>\n                    <DrawerBar />\n                    <ChatRoom />\n                </TopAppBarFixedAdjust>\n                <Modal />\n            </div>\n        </>\n        :[]\n    }\n    </>\n    )\n}\n\nexport default Home;","import React from 'react';\nimport Dialog, {\n    DialogTitle,\n    DialogContent,\n    DialogFooter,\n  } from '@material/react-dialog';\nimport Button from '@material/react-button';\nimport MaterialIcon from '@material/react-material-icon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport {stateInterface} from '../../../Interfaces';\n\nconst SignupDialog = () => {\n    const dispatch = useDispatch();\n    const {status} = useSelector((state: stateInterface) => state.signupReducer);\n    return(\n        <Dialog id='signupDialog' open={status==='success'}>\n            <DialogTitle>Success</DialogTitle>\n            <DialogContent>\n                <div>Signup successfully</div>\n            </DialogContent>\n            <DialogFooter>\n                <Button \n                    className=\"signup_login_btn\"\n                    outlined={true} \n                    raised={true} \n                    icon={<MaterialIcon role=\"button\" icon=\"account_box\" />}\n                    onClick={() => {\n                        dispatch(push('login'));\n                    }}\n                >Login\n                </Button>\n            </DialogFooter>\n        </Dialog>\n    );\n}\n\nexport default SignupDialog;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Card, {\n    CardPrimaryContent,\n    CardActions,\n    CardActionButtons,\n} from \"@material/react-card\";\nimport Button from '@material/react-button';\nimport TextField, {Input} from '@material/react-text-field';\nimport MaterialIcon from '@material/react-material-icon';\nimport { push } from 'connected-react-router';\nimport {\n    SET_SIGNUP_ACCOUNT,\n    SET_SIGNUP_PASSWORD,\n    SET_SIGNUP_CONFIRM_PASSWORD,\n    SET_SIGNUP_USERNAME,\n    SET_SIGNUP_MESSAGE,\n    SIGNUP_REQUEST\n} from '../../redux/actionTypes';\nimport SignupDialog from './Components/SignupDialog';\nimport {stateInterface} from '../../Interfaces';\n\nconst Signup = () => {\n    const dispatch = useDispatch();\n    const {account, password, confirmPassword, userName, status, message} = useSelector((state: stateInterface) => state.signupReducer);\n\n    const inputHandler = (e: any): void => {\n        const {id, value} = e.currentTarget;\n        switch(id){\n            case \"account\":\n                dispatch({\n                    type: SET_SIGNUP_ACCOUNT,\n                    payload: value,\n                });\n                break;\n            case \"password\":\n                dispatch({\n                    type: SET_SIGNUP_PASSWORD,\n                    payload: value,\n                });\n                break;\n            case \"confirmPassword\":\n                dispatch({\n                    type: SET_SIGNUP_CONFIRM_PASSWORD,\n                    payload: value,\n                });\n                break;\n            case \"userName\":\n                dispatch({\n                    type: SET_SIGNUP_USERNAME,\n                    payload: value,\n                });\n                break;\n        }\n    }\n\n    const signupHandler = (): void => {\n        console.log('signup', account, password, confirmPassword, userName);\n        if(!account || !password || !confirmPassword || !userName){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Please fill in all information'\n            });\n            return;\n        }\n        if(confirmPassword !== password){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Passwords are not same!'\n            });\n            return;\n        }\n        if(account.indexOf('@') <= 0){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Invalid email!'\n            });\n            return;\n        }\n        dispatch({\n            type: SIGNUP_REQUEST,\n            payload: {\n                account: account,\n                password: password,\n                userName: userName\n            }   \n        });\n    }\n\n    return (\n        <>\n        <div id='signLoginContainer'>\n            <Card id=\"signLoginCard\">\n                <CardPrimaryContent className=\"tittle\">\n                    <MaterialIcon role=\"button\" icon=\"person\" />\n                    <a>Signup+</a>\n                </CardPrimaryContent>\n                <hr className='separate_line'/>\n                <CardActions>\n                    <CardActionButtons className='signup_login_info'>\n                        <TextField\n                            label='Email'\n                            className=\"textField\" \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={(): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_ACCOUNT,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"account\"\n                                type=\"account\"\n                                value={account}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Nick Name'\n                            className=\"textField\" \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={(): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_USERNAME,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"userName\"\n                                type=\"string\"\n                                value={userName}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Password'\n                            className=\"textField\"  \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={ (): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_PASSWORD,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"password\"\n                                type=\"password\"\n                                value={password}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Confirm Password'\n                            className=\"textField\"  \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={ (): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_CONFIRM_PASSWORD,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"confirmPassword\"\n                                type=\"password\"\n                                value={confirmPassword}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <div className='signup_btn_block'>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                icon={<MaterialIcon role=\"button\" icon=\"person_add\" />}\n                                onClick={signupHandler}\n                            >Signup\n                            </Button>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                icon={<MaterialIcon role=\"button\" icon=\"keyboard_backspace\" />}\n                                onClick={() => {\n                                    dispatch(push('login'));\n                                }}\n                            >login\n                            </Button>\n                        </div>\n                    </CardActionButtons>\n                </CardActions>\n                {(status === \"error\" || message !== \"\")?(\n                    <div className='warnMsg'>\n                        <p>{message}</p>\n                    </div>\n                ): []}\n            </Card>\n        </div>\n        <SignupDialog/>\n        </>\n    );\n}\n\nexport default Signup;","import React, {useState} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Card, {\n    CardPrimaryContent,\n    CardActions,\n    CardActionButtons,\n} from \"@material/react-card\";\nimport Button from '@material/react-button';\nimport TextField, {Input} from '@material/react-text-field';\nimport MaterialIcon from '@material/react-material-icon';\nimport { push } from 'connected-react-router';\nimport {\n    SET_SIGNUP_ACCOUNT,\n    SET_SIGNUP_PASSWORD,\n    SET_SIGNUP_CONFIRM_PASSWORD,\n    SET_SIGNUP_USERNAME,\n    SET_SIGNUP_MESSAGE,\n    SIGNUP_REQUEST\n} from '../../redux/actionTypes';\nimport SignupDialog from './Components/SignupDialog';\nimport {stateInterface} from '../../Interfaces';\n\nconst Edit = () => {\n    const dispatch = useDispatch();\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const {account, confirmPassword, userName, status, message} = useSelector((state: stateInterface) => state.signupReducer);\n\n    const inputHandler = (e: any): void => {\n        const {id, value} = e.currentTarget;\n        /*\n        switch(id){\n            case \"account\":\n                dispatch({\n                    type: SET_SIGNUP_ACCOUNT,\n                    payload: value,\n                });\n                break;\n            case \"password\":\n                dispatch({\n                    type: SET_SIGNUP_PASSWORD,\n                    payload: value,\n                });\n                break;\n            case \"confirmPassword\":\n                dispatch({\n                    type: SET_SIGNUP_CONFIRM_PASSWORD,\n                    payload: value,\n                });\n                break;\n            case \"userName\":\n                dispatch({\n                    type: SET_SIGNUP_USERNAME,\n                    payload: value,\n                });\n                break;\n               \n        }\n         */\n    }\n\n    const signupHandler = (): void => {\n        /*\n        console.log('signup', account, password, confirmPassword, userName);\n        if(!account || !password || !confirmPassword || !userName){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Please fill in all information'\n            });\n            return;\n        }\n        if(confirmPassword !== password){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Passwords are not same!'\n            });\n            return;\n        }\n        if(account.indexOf('@') <= 0){\n            dispatch({\n                type: SET_SIGNUP_MESSAGE,\n                payload: 'Invalid email!'\n            });\n            return;\n        }\n        dispatch({\n            type: SIGNUP_REQUEST,\n            payload: {\n                account: account,\n                password: password,\n                userName: userName\n            }   \n        });\n        */\n    }\n\n    return (\n        <>\n        <div id='signLoginContainer'>\n            <Card id=\"signLoginCard\">\n                <CardPrimaryContent className=\"tittle\">\n                    <MaterialIcon role=\"button\" icon=\"person\" />\n                    <span>Information</span>\n                </CardPrimaryContent>\n                <hr className='separate_line'/>\n                <CardActions>\n                    <CardActionButtons className='signup_login_info'>\n                        <TextField\n                            label='Email'\n                            className=\"textField\" \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={(): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_ACCOUNT,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"account\"\n                                type=\"account\"\n                                value={account}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Nick Name'\n                            className=\"textField\" \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={(): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_USERNAME,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"userName\"\n                                type=\"string\"\n                                value={userName}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Password'\n                            className=\"textField\"  \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={ (): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_PASSWORD,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"password\"\n                                type=\"password\"\n                                value={password}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <TextField\n                            label='Confirm Password'\n                            className=\"textField\"  \n                            //helperText={<HelperText>Help Me!</HelperText>}\n                            onTrailingIconSelect={ (): void => {\n                                dispatch({\n                                    type: SET_SIGNUP_CONFIRM_PASSWORD,\n                                    payload: ''\n                                })\n                            }}\n                            trailingIcon={<MaterialIcon role=\"button\" icon=\"delete\"/>}\n                        >\n                            <Input\n                                id=\"confirmPassword\"\n                                type=\"password\"\n                                value={confirmPassword}\n                                onChange={inputHandler} \n                            />\n                        </TextField>\n                        <div className='signup_btn_block'>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                disabled={true}\n                                icon={<MaterialIcon role=\"button\" icon=\"person_add\" />}\n                                onClick={signupHandler}\n                            >Save\n                            </Button>\n                            <Button \n                                className=\"signup_login_btn\"\n                                outlined={true} \n                                raised={true} \n                                icon={<MaterialIcon role=\"button\" icon=\"keyboard_backspace\" />}\n                                onClick={() => {\n                                    dispatch(push('login'));\n                                }}\n                            >Back\n                            </Button>\n                        </div>\n                    </CardActionButtons>\n                </CardActions>\n                {(status === \"error\" || message !== \"\")?(\n                    <div className='warnMsg'>\n                        <p>{message}</p>\n                    </div>\n                ): []}\n            </Card>\n        </div>\n        <SignupDialog/>\n        </>\n    );\n}\n\nexport default Edit;","import React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { Route, Switch } from 'react-router'; // react-router v4/v5\r\nimport { ConnectedRouter } from 'connected-react-router';\r\nimport configureStore, { history } from './redux/configureStore';\r\nimport './App.scss';\r\nimport Login from './view/LoginSignup/Login';\r\nimport Home from './view/Home'\r\nimport Signup from './view/LoginSignup/Signup';\r\nimport Edit from './view/LoginSignup/Edit';\r\n\r\n\r\nconst store = configureStore({});\r\n\r\nconst App = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            {/*<Navigator />*/}\r\n            <ConnectedRouter history={history}>      \r\n            <Switch>\r\n                <Route exact path=\"/\">\r\n                    <Home /> \r\n                </Route>\r\n                <Route exact path=\"/login\">\r\n                    <Login />\r\n                </Route>\r\n                <Route exact path=\"/signup\">\r\n                    <Signup />\r\n                </Route>\r\n                <Route exact path=\"/edit\">\r\n                    <Edit />\r\n                </Route>\r\n                <Route exact path=\"*\">\r\n                    <div>\r\n                        <h1>Sorry, No this page</h1>\r\n                    </div>\r\n                </Route>\r\n            </Switch>\r\n            </ConnectedRouter>\r\n        </Provider>\r\n    );\r\n}\r\n\r\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/message.232a7059.png\";"],"sourceRoot":""}