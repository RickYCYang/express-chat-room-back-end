(this["webpackJsonpreact-chat-room-front-end"]=this["webpackJsonpreact-chat-room-front-end"]||[]).push([[0],{129:function(e,t){},132:function(e,t,a){},136:function(e,t,a){e.exports=a.p+"static/media/chat.36cb8b4b.png"},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),s=(a(85),a(3)),l=a(21),i=a(18),u=a(24),m=a(22),d=a(75),p=a(79),E=a(6),g={account:"",password:"",message:"",status:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_ACCOUNT":return Object(E.a)({},e,{account:t.payload});case"SET_LOGIN_PASSWORD":return Object(E.a)({},e,{password:t.payload});case"LOGIN_REQUEST":return Object(E.a)({},e,{status:"loading"});case"LOGIN_SUCCESS":return Object(E.a)({},e,{status:"logined"});case"LOGIN_FAIL":return Object(E.a)({},e,{status:"error",message:t.payload.message});default:return e}},S={account:"",userName:"",password:"",confirmPassword:"",message:"",status:""},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIGNUP_ACCOUNT":return Object(E.a)({},e,{account:t.payload});case"SET_SIGNUP_PASSWORD":return Object(E.a)({},e,{password:t.payload});case"SET_SIGNUP_USERNAME":return Object(E.a)({},e,{userName:t.payload});case"SET_SIGNUP_CONFIRM_PASSWORD":return Object(E.a)({},e,{confirmPassword:t.payload});case"SET_SIGNUP_MESSAGE":return Object(E.a)({},e,{message:t.payload});case"SIGNUP_REQUEST":return Object(E.a)({},e,{status:"processing"});case"SIGNUP_SUCCESS":return Object(E.a)({},e,{status:"success"});case"SIGNUP_FAIL":return Object(E.a)({},e,{status:"error",message:t.payload.message});default:return e}},_=a(20),O=a(31),y={messageBox:[],webSocket:null,onlineCount:0,connectStatus:"",styleMessageBox:!0,isMobile:!1,drawerOpen:!1,userList:{},chatPeople:"",newMessageCount:{}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_WEB_SOCKET":return Object(E.a)({},e,{connectStatus:"connecting"});case"CONNECT_WEB_SOCKET_SUCCESS":return Object(E.a)({},e,{connectStatus:"connected",webSocket:t.payload});case"CONNECT_WEB_SOCKET_FAIL":return Object(E.a)({},e,{connectStatus:"disconnect",webSocket:t.payload});case"SET_USER_LIST":return Object(E.a)({},e,{userList:t.payload});case"SET_MESSAGE_BOX":return Object(E.a)({},e,{messageBox:e.messageBox.concat(t.payload)});case"SET_MESSAGE_BOX_STYLE":return Object(E.a)({},e,{styleMessageBox:t.payload});case"SET_IS_MOBILE":return Object(E.a)({},e,{isMobile:t.payload});case"DISCONNECT_WEB_SOCKET":return Object(E.a)({},e,{webSocket:null});case"SET_DRAWER_OPEN":return Object(E.a)({},e,{drawerOpen:t.payload});case"SET_CHAT_PEOPLE":return Object(E.a)({},e,{chatPeople:t.payload});case"SET_NEW_MESSAGE_ALARM":var a=t.payload.userName,n=0;return"reset"===t.payload.type||e.chatPeople===a?Object(E.a)({},e,{newMessageCount:Object(E.a)({},e.newMessageCount,Object(O.a)({},a,n))}):(Object.entries(e.newMessageCount).forEach((function(e){var t=Object(_.a)(e,2),r=t[0],c=t[1];r===a&&"number"===typeof c&&(n=c)})),Object(E.a)({},e,{newMessageCount:Object(E.a)({},e.newMessageCount,Object(O.a)({},a,n+1))}));default:return e}},v=function(e){return Object(m.c)({router:Object(i.b)(e),loginReducer:b,signupReducer:f,chatRoomReducer:N})},w=a(14),T=a.n(w),h=a(10),C=a(11),I="https://express-chat-room-back-end.herokuapp.com",j=a(25),x=a.n(j);x.a.defaults.baseURL=I,x.a.defaults.headers.post.Accept="application/json",x.a.defaults.headers.post["Content-Type"]="application/json",x.a.defaults.withCredentials=!0,x.a.defaults.xsrfCookieName="XSRF-TOKEN",x.a.defaults.xsrfHeaderName="X-XSRF-TOKEN";var k=function(e,t){return x.a.post(e,t)},P=(x.a,a(38),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=new Date,r={value:t,expiry:n.getTime()+1e3*a*60*60*24};localStorage.setItem(e,JSON.stringify(r))}),U=function(e){localStorage.removeItem(e)},A=function(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t);return(new Date).getTime()>a.expiry?(localStorage.removeItem(e),null):a.value},R=a(78),G=a.n(R),M=A("userName"),L=I,B=function(e){e.disconnect(L,{query:"userName=".concat(M)})},F=function(e,t,a,n,r,c){console.log("socket",a,n),e.emit("sendMessage",{sourceUser:a,targetUser:n,messageType:t,message:r,timestamp:c})},D=function(e,t,a){M!==t&&e({type:"SET_NEW_MESSAGE_ALARM",payload:{type:"append",userName:"Public"===a?a:t}})},W=T.a.mark(z),K=T.a.mark(H);function z(e){var t,a,n,r;return T.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,a=t.account,n=t.password,console.log(a,n),c.next=4,k("login",{email:a,password:n});case 4:if("fail"!==(r=c.sent).data.status){c.next=11;break}return console.log("Fail:",r),c.next=9,Object(h.a)({type:"LOGIN_FAIL",payload:{message:r.data.message}});case 9:c.next=21;break;case 11:if("success"!==r.data.status){c.next=21;break}return console.log("success:",r),c.next=15,P("token",r.data.token,1);case 15:return c.next=17,P("userName",r.data.userName,1);case 17:return c.next=19,Object(h.a)({type:"LOGIN_SUCCESS"});case 19:return c.next=21,Object(h.a)(Object(C.d)("/"));case 21:case"end":return c.stop()}}),W)}function H(e){var t;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("logout action",e),t=e.payload,a.next=4,U("userName");case 4:return a.next=6,U("token");case 6:return a.next=8,B(t);case 8:return a.next=10,Object(h.a)({type:"DISCONNECT_WEB_SOCKET"});case 10:return a.next=12,Object(h.a)(Object(C.d)("/login"));case 12:case"end":return a.stop()}}),K)}var q=T.a.mark(X);function X(e){var t,a,n,r,c;return T.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,a=t.account,n=t.password,r=t.userName,o.next=3,k("signup",{email:a,password:n,userName:r});case 3:if("error"!==(c=o.sent).status){o.next=10;break}return console.log("Fail:",c),o.next=8,Object(h.a)({type:"SIGNUP_FAIL",payload:{message:c.message}});case 8:o.next=14;break;case 10:if("success"!==c.status){o.next=14;break}return console.log("Signup success"),o.next=14,Object(h.a)({type:"SIGNUP_SUCCESS"});case 14:case"end":return o.stop()}}),q)}var Q=T.a.mark(J);function J(e){var t;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("connectWebSocket",e),a.next=3,G()(L,{query:"userName=".concat(M)});case 3:if(!(t=a.sent)){a.next=9;break}return a.next=7,Object(h.a)({type:"CONNECT_WEB_SOCKET_SUCCESS",payload:t});case 7:a.next=11;break;case 9:return a.next=11,Object(h.a)({type:"CONNECT_WEB_SOCKET_FAIL"});case 11:case"end":return a.stop()}}),Q)}var Y=T.a.mark($);function $(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)("LOGIN_REQUEST",z);case 2:return e.next=4,Object(h.b)("SIGNUP_REQUEST",X);case 4:return e.next=6,Object(h.b)("LOGOUT",H);case 6:return e.next=8,Object(h.b)("CONNECT_WEB_SOCKET",J);case 8:case"end":return e.stop()}}),Y)}var V=Object(u.a)(),Z=Object(p.a)();a(132);var ee=a(12),te=a.n(ee),ae=a(13),ne=a.n(ae),re=a(7),ce=a.n(re),oe=a(4),se=a.n(oe),le=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.loginReducer})),c=t.account,o=t.password,l=t.status,i=t.message,u=A("token"),m=function(t){var a=t.currentTarget,n=a.id,r=a.value;switch(n){case"account":e({type:"SET_LOGIN_ACCOUNT",payload:r});break;case"password":e({type:"SET_LOGIN_PASSWORD",payload:r})}};return Object(n.useEffect)((function(){u&&e(Object(C.d)("/"))}),[u]),r.a.createElement("div",{id:"signLoginContainer"},r.a.createElement(te.a,{id:"signLoginCard"},r.a.createElement(ee.CardPrimaryContent,{className:"tittle"},r.a.createElement(se.a,{role:"button",icon:"person"}),r.a.createElement("a",null,"Login")),r.a.createElement("hr",{className:"separate_line"}),r.a.createElement(ee.CardMedia,{id:"login_logo",square:!0,imageUrl:a(136)}),r.a.createElement(ee.CardActions,null,r.a.createElement(ee.CardActionButtons,{className:"signup_login_info"},r.a.createElement(ce.a,{label:"Email",className:"textField",onTrailingIconSelect:function(){e({type:"SET_LOGIN_ACCOUNT",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"account",type:"email",value:c,onChange:m})),r.a.createElement(ce.a,{label:"Password",className:"textField",onTrailingIconSelect:function(){e({type:"SET_LOGIN_PASSWORD",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"password",type:"password",value:o,onChange:m})),r.a.createElement("div",null,r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"login"}),onClick:function(){e({type:"LOGIN_REQUEST",payload:{account:c,password:o}})}},"Login"),r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"account_box"}),onClick:function(){e(Object(C.d)("signup"))}},"Signup")))),"error"===l?r.a.createElement("div",{className:"warnMsg"},r.a.createElement("p",null,i)):[]))},ie=a(19),ue=a.n(ie),me=function(e){return r.a.createElement("div",{className:"message-box-userInfo"},r.a.createElement(se.a,{role:"button",icon:"account_circle",className:"account_icon"}),r.a.createElement("span",null,e.sourceUser,"(",e.timestamp,")"))},de=function(e){var t=Object(s.e)((function(e){return e.chatRoomReducer})).styleMessageBox,a=A("userName");return r.a.createElement("div",{className:t?a===e.sourceUser?"style-message-text-mine":"style-message-text-other":"message-text"},function(){switch(e.messageType){case"string":return e.message;case"image":return r.a.createElement("img",{src:e.message,className:"message-image"})}}())},pe=r.a.memo((function(e){var t=A("userName");return r.a.createElement("div",{className:t===e.sourceUser?"message-box-mine":"message-box-other"},r.a.createElement(me,e),r.a.createElement(de,e))}),(function(e,t){return console.log(e.sourceUser===t.sourceUser&&e.timestamp===t.timestamp),e.sourceUser===t.sourceUser&&e.timestamp===t.timestamp})),Ee=function(){var e=A("userName"),t=Object(s.e)((function(e){return e.chatRoomReducer})),a=t.messageBox,c=t.styleMessageBox,o=t.chatPeople,l=Object(n.useRef)(null),i=Object(n.useRef)(null),u="style-messagePanel-background",m="non-style-messagePanel-background";return Object(n.useEffect)((function(){var e;a&&l.current&&(l.current.offsetHeight<l.current.scrollHeight&&l.current.scrollTop+l.current.offsetHeight+200>l.current.scrollHeight&&l.current.scrollTo({behavior:"smooth",top:(null===(e=l.current)||void 0===e?void 0:e.scrollHeight)-l.current.offsetHeight}))}),[a]),r.a.createElement("div",{className:c?u:m},r.a.createElement("div",{id:"messagePanel",ref:l},a.filter((function(t){return"Public"===o&&"Public"===t.targetUser?t:o===t.targetUser&&e===t.sourceUser||o===t.sourceUser&&e===t.targetUser?t:void 0})).map((function(e){return r.a.createElement(pe,Object.assign({},e,{key:e.sourceUser+e.timestamp}))})),r.a.createElement("div",{className:"anchor",ref:i})))},ge=function(){var e=Object(n.useState)(""),t=Object(_.a)(e,2),a=t[0],c=t[1],o=Object(n.useRef)(null),l=Object(s.e)((function(e){return e.chatRoomReducer})),i=l.webSocket,u=l.chatPeople,m=A("userName")||"",d=function(){var e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+":"+(new Date).getUTCMilliseconds()},p=function(){var e=d();F(i,"string",m,u,a,e),c("")},E=function(e){"Enter"===e.key&&p()};Object(n.useEffect)((function(){return document.addEventListener("keypress",E),function(){document.removeEventListener("keypress",E)}}),[a]);var g=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){"string"===typeof n.result&&t(n.result)},n.onerror=function(){a(n.error)},n.readAsDataURL(e)}))};return r.a.createElement("div",{id:"messageSender"},r.a.createElement(ce.a,{label:"\u4f60\u60f3\u8aaa\u4ec0\u9ebc",id:"msgTextEdit",onTrailingIconSelect:function(){var e;null===(e=o.current)||void 0===e||e.click()},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"image"})},r.a.createElement(re.Input,{id:"msgTextEditInput",value:a,onChange:function(e){var t=e.currentTarget.value;c(t)}})),r.a.createElement("input",{type:"file",style:{display:"none"},ref:o,accept:"image/*",onChange:function(){var e,t;if(null!==(null===(e=o.current)||void 0===e?void 0:e.files)&&void 0!==(null===(t=o.current)||void 0===t?void 0:t.files)){var a=o.current.files[0];g(a).then((function(e){var t=d();F(i,"image",m,u,e,t)})).catch((function(e){return console.log("error",e)}))}}}),r.a.createElement(ne.a,{id:"txtSendBtn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"send"}),onClick:p},"Send"))},be=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.chatRoomReducer})),c=t.webSocket,o=t.isMobile;return Object(n.useEffect)((function(){c?(function(e,t,n){e.on("newPublicMessage",(function(e){D(t,e.sourceUser,e.targetUser),t({type:"SET_MESSAGE_BOX",payload:e}),document.hasFocus()||n||new Notification(e.sourceUser,{body:e.message,icon:a(74)})}))}(c,e,o),function(e,t,n){e.on("newPrivateMessage",(function(e){D(t,e.sourceUser,e.targetUser),t({type:"SET_MESSAGE_BOX",payload:e}),document.hasFocus()||n||new Notification(e.sourceUser,{body:e.message,icon:a(74)})}))}(c,e,o),function(e,t){e.on("userList",(function(e){t({type:"SET_USER_LIST",payload:e})}))}(c,e)):e({type:"CONNECT_WEB_SOCKET"})}),[c]),r.a.createElement("main",{id:"mainGrid"},r.a.createElement(Ee,null),r.a.createElement(ge,null))},Se=a(49),fe=a.n(Se),_e=a(16),Oe=a.n(_e),ye=function(){var e=Object(n.useState)(0),t=Object(_.a)(e,2),a=t[0],c=t[1],o=Object(s.d)();return r.a.createElement(Oe.a,{singleSelection:!0,selectedIndex:a,handleSelect:function(e){c(e),o({type:"SET_MESSAGE_BOX_STYLE",payload:0===e})}},r.a.createElement(_e.ListItem,null,r.a.createElement(_e.ListItemGraphic,{graphic:r.a.createElement(se.a,{icon:"color_lens"})}),r.a.createElement(_e.ListItemText,{primaryText:"Colorful Theme Style"})),r.a.createElement(_e.ListItem,null,r.a.createElement(_e.ListItemGraphic,{graphic:r.a.createElement(se.a,{icon:"format_color_reset"})}),r.a.createElement(_e.ListItemText,{primaryText:"Simple Style"})))},Ne=r.a.memo((function(e){var t=e.newMessageCount;return r.a.createElement("div",{className:"message-alarm"},t)}),(function(e,t){return e.newMessageCount===t.newMessageCount})),ve=function(){var e=Object(n.useState)(0),t=Object(_.a)(e,2),a=t[0],c=t[1],o=A("userName"),l=Object(s.e)((function(e){return e.chatRoomReducer})),i=l.userList,u=l.newMessageCount,m=Object(s.d)(),d=Object.values(i).filter((function(e){return"online"===e.status&&e.userName!==o}));d.splice(0,0,{userName:"Public",status:"online"});var p=Object(n.useCallback)((function(e){c(e),m({type:"SET_CHAT_PEOPLE",payload:d[e].userName}),m({type:"SET_NEW_MESSAGE_ALARM",payload:{type:"reset",userName:d[e].userName}})}),[d]);return Object(n.useEffect)((function(){p(0)}),[]),r.a.createElement(Oe.a,{singleSelection:!0,selectedIndex:a,handleSelect:p},d.map((function(e){return r.a.createElement(_e.ListItem,{key:e.userName},r.a.createElement(_e.ListItemGraphic,{graphic:r.a.createElement(se.a,{icon:"Public"===e.userName?"people":"person"})}),r.a.createElement(_e.ListItemText,{primaryText:e.userName}),u[e.userName]>0?r.a.createElement(Ne,{newMessageCount:u[e.userName]?u[e.userName]:0}):[])})))},we=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.chatRoomReducer})).drawerOpen;return r.a.createElement(fe.a,{modal:!0,open:t,onClose:function(){e({type:"SET_DRAWER_OPEN",payload:!1})}},r.a.createElement(Se.DrawerContent,null,r.a.createElement(ye,null),r.a.createElement("hr",{style:{borderColor:"#2E86C1",width:"90%"}}),r.a.createElement(ve,null)))},Te=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.chatRoomReducer})),a=t.drawerOpen,n=t.webSocket,c=t.chatPeople;return r.a.createElement(ue.a,null,r.a.createElement(ie.TopAppBarRow,null,r.a.createElement(ie.TopAppBarSection,{align:"start"},r.a.createElement(ie.TopAppBarIcon,{navIcon:!0,tabIndex:0},r.a.createElement(se.a,{hasRipple:!0,icon:"menu",onClick:function(){e({type:"SET_DRAWER_OPEN",payload:!a})}})),r.a.createElement(ie.TopAppBarTitle,{tabIndex:1},"Chat Room",r.a.createElement(se.a,{hasRipple:!0,icon:"chat"}))),r.a.createElement(ie.TopAppBarSection,null,r.a.createElement("a",{id:"chat-people"}," Chat: ",c," ")),r.a.createElement(ie.TopAppBarSection,{align:"end",role:"toolbar"},r.a.createElement(ie.TopAppBarIcon,{actionItem:!0,tabIndex:0},r.a.createElement(se.a,{"aria-label":"Edit",hasRipple:!0,icon:"person","data-tooltip-id":"tooltip-id",onClick:function(){e(Object(C.d)("/edit"))}})),r.a.createElement(ie.TopAppBarIcon,{actionItem:!0,tabIndex:1},r.a.createElement(se.a,{"aria-label":"Logout",hasRipple:!0,icon:"exit_to_app",onClick:function(){e({type:"LOGOUT",payload:n})}})))))},he=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.chatRoomReducer})).isMobile,a=A("token");return Object(n.useEffect)((function(){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&e({type:"SET_IS_MOBILE",payload:!0}),t||window.Notification&&"granted"!==Notification.permission&&Notification.requestPermission((function(e){console.log("status",e)}))}),[]),Object(n.useEffect)((function(){a||e(Object(C.d)("/login"))}),[a]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drawer-container"},r.a.createElement(Te,null),r.a.createElement(ie.TopAppBarFixedAdjust,null,r.a.createElement(we,null),r.a.createElement(be,null)))):[])},Ce=a(32),Ie=a.n(Ce),je=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.signupReducer})).status;return r.a.createElement(Ie.a,{id:"signupDialog",open:"success"===t},r.a.createElement(Ce.DialogTitle,null,"Success"),r.a.createElement(Ce.DialogContent,null,r.a.createElement("div",null,"Signup successfully")),r.a.createElement(Ce.DialogFooter,null,r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"account_box"}),onClick:function(){e(Object(C.d)("login"))}},"Signup")))},xe=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return e.signupReducer})),a=t.account,n=t.password,c=t.confirmPassword,o=t.userName,l=t.status,i=t.message,u=function(t){var a=t.currentTarget,n=a.id,r=a.value;switch(n){case"account":e({type:"SET_SIGNUP_ACCOUNT",payload:r});break;case"password":e({type:"SET_SIGNUP_PASSWORD",payload:r});break;case"confirmPassword":e({type:"SET_SIGNUP_CONFIRM_PASSWORD",payload:r});break;case"userName":e({type:"SET_SIGNUP_USERNAME",payload:r})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"signLoginContainer"},r.a.createElement(te.a,{id:"signLoginCard"},r.a.createElement(ee.CardPrimaryContent,{className:"tittle"},r.a.createElement(se.a,{role:"button",icon:"person"}),r.a.createElement("a",null,"Signup+")),r.a.createElement("hr",{className:"separate_line"}),r.a.createElement(ee.CardActions,null,r.a.createElement(ee.CardActionButtons,{className:"signup_login_info"},r.a.createElement(ce.a,{label:"Email",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_ACCOUNT",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"account",type:"account",value:a,onChange:u})),r.a.createElement(ce.a,{label:"Nick Name",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_USERNAME",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"userName",type:"string",value:o,onChange:u})),r.a.createElement(ce.a,{label:"Password",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_PASSWORD",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"password",type:"password",value:n,onChange:u})),r.a.createElement(ce.a,{label:"Confirm Password",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_CONFIRM_PASSWORD",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"confirmPassword",type:"password",value:c,onChange:u})),r.a.createElement("div",{className:"signup_btn_block"},r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"person_add"}),onClick:function(){console.log("signup",a,n,c,o),a&&n&&c&&o?c===n?a.indexOf("@")<=0?e({type:"SET_SIGNUP_MESSAGE",payload:"Invalid email!"}):e({type:"SIGNUP_REQUEST",payload:{account:a,password:n,userName:o}}):e({type:"SET_SIGNUP_MESSAGE",payload:"Passwords are not same!"}):e({type:"SET_SIGNUP_MESSAGE",payload:"Please fill in all information"})}},"Signup"),r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"keyboard_backspace"}),onClick:function(){e(Object(C.d)("login"))}},"login")))),"error"===l||""!==i?r.a.createElement("div",{className:"warnMsg"},r.a.createElement("p",null,i)):[])),r.a.createElement(je,null))},ke=function(){var e=Object(s.d)(),t=Object(n.useState)(""),a=Object(_.a)(t,2),c=(a[0],a[1],Object(n.useState)("")),o=Object(_.a)(c,2),l=o[0],i=(o[1],Object(s.e)((function(e){return e.signupReducer}))),u=i.account,m=i.confirmPassword,d=i.userName,p=i.status,E=i.message,g=function(t){var a=t.currentTarget,n=a.id,r=a.value;switch(n){case"account":e({type:"SET_SIGNUP_ACCOUNT",payload:r});break;case"password":e({type:"SET_SIGNUP_PASSWORD",payload:r});break;case"confirmPassword":e({type:"SET_SIGNUP_CONFIRM_PASSWORD",payload:r});break;case"userName":e({type:"SET_SIGNUP_USERNAME",payload:r})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"signLoginContainer"},r.a.createElement(te.a,{id:"signLoginCard"},r.a.createElement(ee.CardPrimaryContent,{className:"tittle"},r.a.createElement(se.a,{role:"button",icon:"person"}),r.a.createElement("a",null,"Information")),r.a.createElement("hr",{className:"separate_line"}),r.a.createElement(ee.CardActions,null,r.a.createElement(ee.CardActionButtons,{className:"signup_login_info"},r.a.createElement(ce.a,{label:"Email",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_ACCOUNT",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"account",type:"account",value:u,onChange:g})),r.a.createElement(ce.a,{label:"Nick Name",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_USERNAME",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"userName",type:"string",value:d,onChange:g})),r.a.createElement(ce.a,{label:"Password",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_PASSWORD",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"password",type:"password",value:l,onChange:g})),r.a.createElement(ce.a,{label:"Confirm Password",className:"textField",onTrailingIconSelect:function(){e({type:"SET_SIGNUP_CONFIRM_PASSWORD",payload:""})},trailingIcon:r.a.createElement(se.a,{role:"button",icon:"delete"})},r.a.createElement(re.Input,{id:"confirmPassword",type:"password",value:m,onChange:g})),r.a.createElement("div",{className:"signup_btn_block"},r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,disabled:!0,icon:r.a.createElement(se.a,{role:"button",icon:"person_add"}),onClick:function(){console.log("signup",u,l,m,d),u&&l&&m&&d?m===l?u.indexOf("@")<=0?e({type:"SET_SIGNUP_MESSAGE",payload:"Invalid email!"}):e({type:"SIGNUP_REQUEST",payload:{account:u,password:l,userName:d}}):e({type:"SET_SIGNUP_MESSAGE",payload:"Passwords are not same!"}):e({type:"SET_SIGNUP_MESSAGE",payload:"Please fill in all information"})}},"Save"),r.a.createElement(ne.a,{className:"signup_login_btn",outlined:!0,raised:!0,icon:r.a.createElement(se.a,{role:"button",icon:"keyboard_backspace"}),onClick:function(){e(Object(C.d)("login"))}},"Back")))),"error"===p||""!==E?r.a.createElement("div",{className:"warnMsg"},r.a.createElement("p",null,E)):[])),r.a.createElement(je,null))},Pe=function(e){var t=Object(m.e)(v(V),e,Object(m.d)(Object(m.a)(Object(d.a)(V),Z)));return Z.run($),t}({}),Ue=function(){return r.a.createElement(s.a,{store:Pe},r.a.createElement(i.a,{history:V},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(he,null)),r.a.createElement(l.a,{exact:!0,path:"/login"},r.a.createElement(le,null)),r.a.createElement(l.a,{exact:!0,path:"/signup"},r.a.createElement(xe,null)),r.a.createElement(l.a,{exact:!0,path:"/edit"},r.a.createElement(ke,null)),r.a.createElement(l.a,{exact:!0,path:"*"},r.a.createElement("div",null,r.a.createElement("h1",null,"Sorry, No this page"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,t,a){e.exports=a.p+"static/media/message.232a7059.png"},80:function(e,t,a){e.exports=a(137)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.c032911f.chunk.js.map